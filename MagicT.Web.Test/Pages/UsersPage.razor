@page "/Users"

@using MudBlazor
@inherits ServicePageBase<USERS, IUserService>

<AuthenticationView>
    <Authenticated>
        <GenGrid DataSource="@DataSource" TModel="USERS"
                 EditMode="EditMode.Inline"
                 MaxWidth="MaxWidth.ExtraLarge"
                 Create="Create"
                 Update="Update"
                 Delete="Delete"
                 Cancel="Cancel"
                 Title="Users"
                 FixedFooter="true"
                 Height="500">
            <GenColumns>
                <GenTextField BindingField="@nameof(USERS.U_NAME)" Label="Name" />
                <GenTextField BindingField="@nameof(USERS.U_SURNAME)" Label="Surname" />
                <GenTextField BindingField="@nameof(USERS.U_EMAIL)" Label="Email" />
                <GenCheckBox BindingField="@nameof(USERS.UB_IS_ACTIVE)" Label="Is Active"
                             TrueText="Yes"
                             FalseText="No" />
            </GenColumns>
            <GenDetailGrid>
                <MudTabs Class="mt-5" Style="width:100%!important" Color="Color.Primary">
                    <MudTabPanel Text="Roles">
                        <UserRolesPage ParentModel="context" AUTH_TYPE="@nameof(ROLES)" />
                    </MudTabPanel>
                    <MudTabPanel Text="Permissions">
                        <UserRolesPage ParentModel="context" AUTH_TYPE="@nameof(PERMISSIONS)" />
                    </MudTabPanel>
                </MudTabs>
            </GenDetailGrid>
        </GenGrid>


    </Authenticated>
</AuthenticationView>


@code{
    protected override async Task OnInitializedAsync()
    {
        await Read(default);
        await base.OnInitializedAsync();
    }
}